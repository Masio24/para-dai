<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mi Kareshi</title>
  <link rel="stylesheet" href="styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Chewy&display=swap" rel="stylesheet">
  <script defer src="script.js"></script>
  <style>
    body {
      font-family: 'Chewy', cursive;
      background: linear-gradient(to bottom, #ffe6f0, #f2ccff);
      overflow-x: hidden;
      margin: 0;
    }
    .page {
      min-height: 100vh;
      padding: 2rem;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      position: relative;
      transition: opacity 0.5s ease-in-out;
    }
    .page.visible {
      display: flex;
      opacity: 1;
    }
    .scroll-text p {
      margin-bottom: 2rem;
      font-size: 1.5rem;
      animation: fadeInUp 1s ease both;
    }
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .title {
      font-size: 3rem;
      color: #ff66cc;
      text-shadow: 2px 2px #fff;
    }
    .next-button, .choice-buttons button {
      padding: 0.8rem 2rem;
      font-size: 1.3rem;
      margin-top: 1rem;
      border: none;
      border-radius: 2rem;
      background-color: #ffb3ec;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transition: transform 0.2s;
    }
    .next-button:hover, .choice-buttons button:hover {
      transform: scale(1.1);
    }
    .hearts-container, .sparkles-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }
    .heart, .sparkle {
      position: absolute;
      animation: float 6s linear infinite;
      opacity: 0;
    }
    @keyframes float {
      0% {
        transform: translateY(100vh) scale(0.5);
        opacity: 0;
      }
      50% {
        opacity: 1;
      }
      100% {
        transform: translateY(-10vh) scale(1);
        opacity: 0;
      }
    }
    .gacha-machine {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .gachapon-image {
      width: 300px;
    }
    .lever {
      width: 50px;
      height: 100px;
      background: #ff99cc;
      border-radius: 20px;
      margin-top: 1rem;
      cursor: pointer;
      box-shadow: inset -4px -4px #fff;
    }
    .gacha-ball {
      background: #fff0f5;
      border-radius: 50%;
      padding: 1rem;
      margin: 1rem auto;
      max-width: 300px;
      font-size: 1.2rem;
      animation: fadeInUp 0.8s ease;
    }
    .final-image {
      max-width: 100%;
      border-radius: 2rem;
      box-shadow: 0 0 10px #fff;
      margin: 2rem 0;
    }
    .final-text {
      font-size: 1.6rem;
    }
  </style>
</head>
<body>
  <audio id="bg-music" src="assets/musica.mp3" autoplay loop></audio>
  <div class="hearts-container"></div>
  <div class="sparkles-container"></div>

  <!-- Secciones de la página (igual que antes, sin cambio estructural) -->
  <!-- ... (Aquí va todo el contenido HTML anterior sin cambios, omitiendo por brevedad) -->

  <script>
    const pages = document.querySelectorAll('.page');
    let currentPage = 1;

    function goToPage(n) {
      document.getElementById('bg-music').play();
      pages.forEach(p => p.classList.remove('visible'));
      document.getElementById(`page${n}`).classList.add('visible');
      currentPage = n;
      if (n === 4) document.getElementById('bg-music').pause();
      else document.getElementById('bg-music').play();
    }

    goToPage(currentPage);

    const gachaOutput = document.getElementById('gacha-output');
    const gachaSound = document.getElementById('gacha-sound');
    const gachaTexts = [...];
    let gachaIndex = 0;

    function pullLever() {
      if (gachaIndex < gachaTexts.length) {
        gachaSound.play();
        const newBall = document.createElement('div');
        newBall.className = 'gacha-ball';
        newBall.innerText = gachaTexts[gachaIndex];
        gachaOutput.appendChild(newBall);
        gachaIndex++;
      }
    }

    // Animación de corazones y brillitos
    function createFloatingElement(className, emojiList) {
      const container = document.querySelector(`.${className}-container`);
      const element = document.createElement('div');
      element.className = className;
      element.style.left = Math.random() * 100 + 'vw';
      element.style.animationDuration = (4 + Math.random() * 4) + 's';
      element.style.fontSize = (12 + Math.random() * 24) + 'px';
      element.style.color = `hsl(${Math.random()*360}, 100%, 80%)`;
      element.innerText = emojiList[Math.floor(Math.random() * emojiList.length)];
      container.appendChild(element);
      setTimeout(() => container.removeChild(element), 8000);
    }

    setInterval(() => createFloatingElement('heart', ['❤', '💕', '💖', '💗']), 500);
    setInterval(() => createFloatingElement('sparkle', ['✨', '🌟', '💫']), 1000);
  </script>
</body>
</html>
